"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),isEqual=_interopDefault(require("fast-deep-equal")),invariant=_interopDefault(require("invariant")),FormContext=React.createContext(null);const FormRefContext=React.createContext(null),FormControllerContext=React.createContext(null),cloneObject=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,r)},newObject=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];return 0===t.length?cloneObject(e):t.reduce((r,t)=>cloneObject(r,"function"==typeof t&&t(e,r)||t),cloneObject(e))},TYPE_NULL="null",TYPE_UNDEFINED="undefined",TYPE_STRING="string",TYPE_ARRAY="array",TYPE_BOOLEAN="boolean",TYPE_OBJECT="object",TYPE_FUNCTION="function",TYPE_ERROR="error",TYPE_SYMBOL="symbol",TYPE_GENERATOR_FUNCTION="generatorFunction",type={"[object Null]":"null","[object Undefined]":"undefined","[object String]":"string","[object Array]":"array","[object Boolean]":"boolean","[object Object]":"object","[object Function]":"function","[object Error]":"error","[object Symbol]":"symbol","[object GeneratorFunction]":"generatorFunction"},typeOf=e=>void 0===e?typeof e:type[Object.prototype.toString.call(e)]||typeof e,_uniqueId={},generateTimeStamp=()=>(new Date).getTime(),generateUniqueId=function e(){const r=Math.floor(Math.random()*generateTimeStamp());return _uniqueId[r]?e():(_uniqueId[r]=r,r)},deleteUniqueId=e=>delete _uniqueId[e],IS_SCHEMA=`_schema_id_@_${generateTimeStamp()}_@_`,IS_FORMREF=`${IS_SCHEMA}_ref`,IS_MULTIPLE=`${IS_SCHEMA}_multiple`,PRIMITIVE_VALUE=`${IS_SCHEMA}_primitive_@_`,SCHEMA_CONFIG=`${IS_SCHEMA}_config`,ON_CHANGE="onChange",ON_BLUR="onBlur",VALUE="value",ERROR="error",_getPlatformBasedFieldValue=e=>e&&"object"==typeof e&&e.target&&"function"==typeof e.preventDefault?e.target.value:e,_getPlatformBasedFieldName=e=>e&&"object"==typeof e&&e.target&&"function"==typeof e.preventDefault?e.target.name:void 0,_checkType=(e,r)=>newObject("function"==typeof e?e(r):e),_trimStrings=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&"string"==typeof e&&String(e)){const t=String(e).trim();return r?Number(t):t}return e},_setInitialValues=e=>{let{formConfig:r,initialValues:t={},formRef:o,isMultiple:n,isError:i}=e;const a=e=>{const o=r[e]||{};return e in t?"function"==typeof t[e]?t[e]():t[e]:"default"in o?o.default:""},u=(n&&Array.isArray(t)?t:[t]).reduce((e,t)=>{if(r[IS_MULTIPLE])return[];const u=Object.entries(r||{}).reduce((e,r)=>{let[n,u={}]=r;return newObject(e,n in t?{[n]:u&&(u[IS_SCHEMA]||u[IS_MULTIPLE]||u._formId_)?_setInitialValues({formRef:u._formId_?u:o&&o.current&&o.current._schema[n].formRef,initialValues:t[n]||{},formConfig:u._formId_?u.getFormConfig():u[SCHEMA_CONFIG],isMultiple:u[IS_MULTIPLE],isError:i}):i?t[n]||null:a(n)}:{[n]:i?t[n]||null:a(n)})},{});return n?e.concat([u]):u},n?[]:{});return o&&o.current&&(o.current[i?"errors":"values"]=u),u},_setInitialErrors=e=>_setInitialValues({...e,isError:!0});function _deepCopy(e,r,t){if(null===e||"object"!=typeof e)return e;if("function"==typeof e.clone)return e.clone(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(e.nodeType&&"function"==typeof e.cloneNode)return e.cloneNode(!0);void 0===r&&(r=[],t=[]);var o=r.length;for(i=0;i<o;i++)if(e===r[i])return t[i];if("[object Array]"==Object.prototype.toString.call(e)){var n=e.slice();r.push(e),t.push(n);for(var i=n.length;i--;)n[i]=_deepCopy(n[i],r,t);return n}var a=Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__;a||(a=e.constructor.prototype);var u=Object.create(a);for(var f in r.push(e),t.push(u),e)u[f]=_deepCopy(e[f],r,t);return u}const checkKey=(e,r,t)=>{const o=Array.isArray(t)?t:[t];invariant(o.includes(typeOf(e)),r)},checkIsValidConfig=e=>e[IS_SCHEMA]||e[IS_MULTIPLE],newSchema=e=>(checkIsValidConfig(e||{})&&checkKey(!1,"(newSchema) Invalid form schema","object"),{[IS_SCHEMA]:!0,[SCHEMA_CONFIG]:e}),newFormArray=e=>(e[IS_MULTIPLE]&&checkKey(!1,"(newMultiple) Invalid form schema","object"),{[IS_MULTIPLE]:!0,[SCHEMA_CONFIG]:e[IS_SCHEMA]?e._config:e}),TYPE_STRING$1="string",TYPE_ARRAY$1="array",TYPE_OBJECT$1="object",TYPE_FUNCTION$1="function",ID_KEY="id";var useConsumerHook=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=React.useRef({}),{inputProps:t={},idKey:o,onSubmit:n,setInputProps:i,extraProps:a}=React.useContext(FormContext)||{},{render:u,inputConfig:f,...l}=React.useContext(FormControllerContext)||{},c={...e.inputConfig,...f},{formRef:s,renderForm:m,_rootRef:_}=React.useContext(FormRefContext)||{};let d=t[e[o||"id"]]||{};const p=!(!t[e[o||"id"]]||"string"!=typeof t[e[o||"id"]]);if(!p||!t[e[o||"id"]]||!s)return{inputProps:{}};if(d._fieldConfig&&!isEqual(r.current.inputConfig,c)&&(r.current.inputConfig&&Object.keys(r.current.inputConfig).forEach(e=>{let[r,t]=e;delete d._fieldConfig[r]}),d._fieldConfig._initiated=p,"object"===typeOf(c)&&Object.entries(c).forEach(e=>{let[r,t]=e;void 0!==t&&(d._fieldConfig[r]=t)}),s.setFormConfig({...s.getFormConfig(),[e[o||"id"]]:newObject(d._fieldConfig||{},{_initiated:p,render:!!(void 0!==c.render?c.render:void 0!==u?u:m||u)})},[e[o||"id"]],!1),s._renderForm(!0)),!(PRIMITIVE_VALUE!==e[o||"id"]||s._parentRef&&s._parentRef._isMultipleForm))throw new Error('Invalid: "PRIMITIVE_VALUE" can only be used directly under "Form.Multiple"');const g=s.getInputProps(a);if(PRIMITIVE_VALUE in g&&e[o||"id"]!==PRIMITIVE_VALUE)throw new Error(`Invalid: "${e[o||"id"]}" cannot add any field to primitive value `);if(!(e[o||"id"]in g||r.current.id)){if(r.current.id=e[o||"id"],e[o||"id"]===PRIMITIVE_VALUE&&Object.values(g).filter(e=>e._config&&e._config._initiated).length)throw new Error('Invalid: cannot add id="PRIMITIVE_VALUE" field. Primitive value is always unique. Please remove the other fields in order to use id="PRIMITIVE_VALUE" ');s.modifyFormConfig({[e[o||"id"]]:newObject(c||{},{_initiated:p,render:!!(void 0!==c.render?c.render:m||u)})}),s._setInputProps(),s._renderForm(),s.renderForm()}React.useEffect(()=>(i(),()=>{_.current.dontResetOnUnmount||(d._fieldConfig&&(d._fieldConfig._initiated=!1,"object"===typeOf(c)&&Object.keys(c).forEach(e=>{d._fieldConfig[e]=d._defaultConfig[e]})),r.current.id&&t[IS_SCHEMA].deleteFormConfig([r.current.id]),t[IS_SCHEMA].resetFormInput([e[o||"id"]],!!r.current.id),t[IS_SCHEMA].onFormChangeCallback())}),[s._formId_]),r.current.inputConfig=c,d.error&&d[IS_SCHEMA].validateField(void 0===d.value?"":d.value);const I=s.getInputProps(a)[e[o||"id"]]||{};return{inputProps:{...I.inputProps||{},...l},_inputFieldConfig:I._config,...n?{onSubmit:n}:{}}};const useFormConsumer=useConsumerHook,Consumer=React.memo(e=>{let{children:r,...t}=e;return"function"==typeof r?r(t):r},(e,r)=>e.inputProps.value===r.inputProps.value&&e.inputProps.error===r.inputProps.error&&(e._inputFieldConfig&&e._inputFieldConfig._config.lastUpdated)===(r._inputFieldConfig&&r._inputFieldConfig._config.lastUpdated));var FormConsumer=e=>{let{children:r,...t}=e;return React__default.createElement(Consumer,useConsumerHook(t),r)};const getFormRef=(e,r)=>{let t=e;return t._isSchema_or_isMultiple_config_is_root&&(t=t._schema[t._isSchema_or_isMultiple_config_is_root].formRef),t=r?t&&t._schema[r]&&t._schema[r].formRef:t},checkFormRefIsValid=e=>{if(!e||"FormRef"!==e.constructor.name)throw new Error("Invalid FormRef")};var FormProvider=React.forwardRef((e,r)=>{let{children:t,idKey:o,onSubmit:n,formRef:i,extraProps:a,id:u,renderForm:f,dontResetOnUnmount:l}=e;if(!i&&!u||i&&"FormRef"!==i.constructor.name)throw i?new Error("Invalid FormRef"):new Error("Required props 'formRef' or 'id' ");const{formRef:c,renderForm:s,setRefresh:m,rootFormRef:_,_rootRef:d}=React.useContext(FormRefContext)||{},p=React.useRef({}),g=React.useRef({}),I=d||g;p.current.dontResetOnUnmount=l;const[R,F]=React.useState(),{extraProps:E={}}=React.useContext(FormContext)||{},C=newObject(E,a),h=_||i;let y;y=(e=>{m&&m(e),F(e)}),p.current.__setRefresh=y;const v=void 0!==f?f:s,S=React.useRef({});let P=i||c;checkFormRefIsValid(P);let O=getFormRef(P,u);if(i&&c&&(c.formId===i.formId||i.formId===h.formId))throw new Error('Invalid: Formref are not valid. Cannot be used formref inside nested formref. Please use "id" instead');if(!O&&u){if(checkFormRefIsValid(P),P._isMultipleForm)throw new Error("Invalid: Cannot use 'id' directly under 'FormRef.Multiple'. Please use formRef props instead ");S.current.id=u;let e=P.modifyFormConfig({[u]:newSchema({})}),r=getFormRef(P=e,u);O=r}if(checkFormRefIsValid(O),O._isMultipleForm)throw new Error(u?`Invalid: This id (${u}) is configured for multiple form. Please use the 'Form.Multiple'`:"Invalid: This FormRef is configured for multiple form. Please use the 'Form.Multiple'");O._setRenderForm||(O._ref(IS_FORMREF)._setRenderForm=P._setRenderForm);const[M,b]=React.useState(()=>O&&O.getInputProps(C));return React.useEffect(()=>{b(O&&O.getInputProps(C))},[O._formId_]),O&&O._formId_&&(O._ref(IS_FORMREF)._setInputProps=c?e=>{c._renderInputProps&&c._renderInputProps(),b(e)}:b),React.useEffect(()=>()=>{p.current.dontResetOnUnmount&&(I.current.dontResetOnUnmount=p.current.dontResetOnUnmount)},[]),React.useEffect(()=>()=>{I.current.dontResetOnUnmount||(O&&O._ref(IS_FORMREF)._setInputProps&&delete O._ref(IS_FORMREF)._setInputProps,O&&O._ref(IS_FORMREF)._extraProps&&delete O._ref(IS_FORMREF)._extraProps)},[O._formId_]),React.useEffect(()=>()=>{S.current.id&&!I.current.dontResetOnUnmount&&(P.deleteFormConfig([S.current.id]),p.current.__setRefresh({}))},[P._formId_]),O&&O._formId_&&(O._ref(IS_FORMREF)._extraProps=C),React.useEffect(()=>(O._ref(IS_FORMREF)._is_form_initiated=!0,O._renderForm(),O.renderForm(),()=>{I.current.dontResetOnUnmount||(O._ref(IS_FORMREF)._is_form_initiated=!1,O._renderForm(),O.renderForm())}),[O._formId_]),h._formRef.__formRef__.values=h._formRef.__formRef__.getValues(),h._formRef.__formRef__.errors=h._formRef.__formRef__.getErrors(),React__default.createElement(FormContext.Provider,{value:{inputProps:M,idKey:o,onSubmit:n,setInputProps:()=>b(()=>O.getInputProps(C)),formId:P._formId_,extraProps:C}},React__default.createElement(FormRefContext.Provider,{value:{formRef:O,formId:O._formId_,renderForm:v,lastUpdated:O._lastUpdated,setRefresh:y,rootFormRef:_||i,_rootRef:I}},r&&"current"in r&&(r.current=O)&&null,"function"==typeof t?t({inputProps:M,values:O.getValues(),errors:O.getErrors(),formRef:O}):t))});const convertToOriginalData=e=>"object"===typeOf(e)&&PRIMITIVE_VALUE in e?e[PRIMITIVE_VALUE]:e,generateNewFormRef=(e,r,t,o,n)=>{const i="object"===typeOf(r)||void 0===r?r:{[PRIMITIVE_VALUE]:r};return e._formValidationHandler(newObject({...newObject(e._initialConfig),FORM_CONFIG:n?newFormArray({}):newObject(e._initialConfig.FORM_CONFIG),initialState:i||{},renderFormCallback:o._setRenderForm,_rootRef:{current:o},getFormData:o._isRenderForm?t._setRenderForm:void 0,_parentRef:e,_parentId:e.formId}))},_getFormRef=(e,r)=>{let t=e;return t._isSchema_or_isMultiple_config_is_root&&(t=t._schema[t._isSchema_or_isMultiple_config_is_root].formRef),t=r?t&&t._schema[r]&&t._schema[r].formRef:t},checkFormRefIsValid$1=e=>{if(!e||"FormRef"!==e.constructor.name)throw new Error("Invalid FormRef")};var MultipleFormProvider=React.forwardRef((e,r)=>{let{children:t,formRef:o,noAutoLoop:n,id:i,renderForm:a,defaultCount:u=1,dontResetOnUnmount:f}=e;if(!o&&!i||o&&"FormRef"!==o.constructor.name)throw o?new Error("Invalid FormRef"):new Error("Required props 'formRef' or 'id' ");const{formRef:l,setRefresh:c,renderForm:s,rootFormRef:m,_rootRef:_}=React.useContext(FormRefContext)||{},{setInputProps:d}=React.useContext(FormContext),p=React.useRef({}),g=React.useRef({}),I=React.useRef({}),R=_||I;g.current.dontResetOnUnmount=f;const F=void 0!==a?a:s,E=m||o;let C=o||l;checkFormRefIsValid$1(C);const h=_getFormRef(C,i);let y=h;if(y)h&&o&&!h._multipleConfig&&h._parentRef&&h._parentRef.modifyFormConfig({[h._parentId]:{...h._parentConfig[h._parentId],[SCHEMA_CONFIG]:newFormArray({})}});else if(i){p.current.id=i;let e=C.modifyFormConfig({[i]:newFormArray({})}),r=_getFormRef(C=e,i);y=r}if(checkFormRefIsValid$1(y),!y._isMultipleForm)throw new Error(i?`Invalid: This id (${i}) is configured for simple form. Please use the 'Form.Provider'`:"Invalid: This FormRef is configured for simple form. Please use the 'Form.Provider'");const v=React.useRef({}),[S,P]=React.useState();let O;O=(e=>{c&&c(e),P(e)});const[M,b]=React.useState(()=>(()=>y[IS_MULTIPLE]._initialValues.length>0?y[IS_MULTIPLE]._initialValues.map(e=>generateNewFormRef(y,e,l,E,!!l._multipleConfig)):[...Array("number"==typeof u?u:0)].map(e=>generateNewFormRef(y,e,l,E,!!l._multipleConfig)))());v.current.formRefArray=M;const L={},A=(()=>v.current.formRefArray.map((e,r)=>{let{formId:t}=e;return L[t]=r,t}))();v.current.formIds=A,v.current.formIdIndex=L;const T=React.useCallback((e,r)=>{const t=v.current.formIdIndex[e],o=v.current.formIdIndex[r];t!==o&&v.current.formRefArray.length>1&&o>=0&&o<v.current.formRefArray.length&&t>=0&&t<v.current.formRefArray.length&&b(e=>{const r=e.slice(),n=r[t];return"number"==typeof o&&"number"==typeof t&&(r.splice(t,1),r.splice(o,0,n)),r})},[]),V=React.useCallback((e,r)=>{const t=v.current.formIdIndex[e],o=v.current.formIdIndex[r];t!==o&&v.current.formRefArray.length>1&&o>=0&&o<v.current.formRefArray.length&&t>=0&&t<v.current.formRefArray.length&&b(e=>{const r=e.slice(),n=r[t],i=r[o];return console.log(r),"number"==typeof o&&"number"==typeof t&&(r.splice(t,1,i),console.log(r),r.splice(o,1,n),console.log(r)),r})},[]),U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(Array.isArray(e)?e:[e]).forEach(e=>{const r=v.current.formRefArray[v.current.formIdIndex[e]];r&&r.formRef&&r.formRef.resetForm()})},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(Array.isArray(e)?e:[e]).forEach(e=>{const r=v.current.formRefArray[v.current.formIdIndex[e]];r&&r.formRef&&r.formRef.clearForm()})},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0;const n=v.current.formIdIndex[r]+(o?1:0);n>=0&&n<=v.current.formRefArray.length&&b(r=>{let o=r.slice();const i=[...Array(t)].map((r,t)=>generateNewFormRef(y,e[t],l,E));return"number"==typeof n?o.splice(n,0,...i):o.concat(i),o})},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;w(Array.isArray(e)?e:void 0!==e?[e]:[],r,t,o)},x=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const t=v.current.formIdIndex[e];if(t>-1&&t<v.current.formRefArray.length&&v.current.formRefArray[t]&&v.current.formRefArray[t].formRef){const o=v.current.formRefArray[t].formRef.getValues();w(Array(r).fill(o),e,r)}},k=React.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&b(r=>r.slice().filter(r=>{let{formId:t}=r;return!e.includes(t)}))}(Array.isArray(e)?e:[e])},[]);r&&"current"in r&&(r.current.formArray=M);const H=React.useCallback(()=>{return v.current.formRefArray.map(e=>{let{formRef:r}=e;return convertToOriginalData(r.getValues())})},[]),q=React.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;if(!Array.isArray(e))return H();if(e.length>v.current.formRefArray.length){const r=e.slice(v.current.formRefArray.length).map(e=>generateNewFormRef(y,e,l,E));b(v.current.formRefArray.concat(r))}return v.current.formRefArray.map((t,o)=>{let{formRef:n}=t;return n.setInitialFormData(e[o]||{},r)})},[]),$=React.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return v.current.formRefArray.map((t,o)=>{let{formRef:n}=t;return n.setFormErrors(e[o]||{},r)})},[]),D=React.useCallback(()=>v.current.formRefArray.map(e=>{let{formRef:r}=e;return r.getFormConfig()}),[]),G=React.useCallback(e=>{if(e){const r=v.current.formRefArray.find(r=>{let{formId:t}=r;return t===e});return r?r.formRef:null}return v.current.formRefArray.map(e=>{let{formRef:r}=e;return r})},[]),Y=React.useCallback(()=>v.current.formRefArray.map(e=>{let{formRef:r}=e;return convertToOriginalData(r.getErrors())}),[]),K=React.useCallback(e=>v.current.formRefArray.map(r=>{let{formRef:t}=r;return t.resetForm(e)}),[]),B=React.useCallback(e=>v.current.formRefArray.map(r=>{let{formRef:t}=r;return t.clearForm(e)}),[]),z=React.useCallback(()=>v.current.formRefArray.length?v.current.formRefArray.map(e=>{let{formRef:r}=e;return r.getSampleForm()}):[],[]),J=React.useCallback(e=>v.current.formRefArray.reduce((r,t)=>{let{formRef:o}=t;const n=o.validateForm(e);return{errorCount:r.errorCount+n.errorCount,isError:r.isError||n.isError,isValidatePassed:r.isValidatePassed||n.isValidatePassed,totalErrorCount:r.totalErrorCount+n.totalErrorCount,errors:r.errors.concat([n.errors]),values:r.values.concat([n.values])}},{errors:[],values:[],errorCount:0,totalErrorCount:0,isError:!1,isValidatePassed:!1}),[]);r&&"current"in r&&(r.current.formArray=M),y[IS_MULTIPLE].getValues=H,y[IS_MULTIPLE].getErrors=Y,y[IS_MULTIPLE].validateForm=J,y[IS_MULTIPLE].resetForm=K,y[IS_MULTIPLE].getSampleForm=z,y[IS_MULTIPLE].getFormConfig=D,y[IS_MULTIPLE].getFormRef=G,y[IS_MULTIPLE].setInitialFormData=q,y[IS_MULTIPLE].setFormErrors=$,y[IS_MULTIPLE].clearForm=B,y.getValues=H,y.getErrors=Y,y.formRefArray=M,y.setFormValues=q,y.setInitialFormData=q,y.setFormErrors=$,y.getSampleForm=z,y.validateForm=J,y.getFormConfig=D,y.getFormRef=G,y.resetForm=K,y.clearForm=B,y.count=M.length,y.setFormRefArray=b,y.values=H(),y.errors=Y();const Z={append:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return N(r,e,t,!0)},reset:U,clear:j,delete:k,clone:x,swap:V,move:T,insert:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return N(r,e,t)},prepend:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;N(r,e,t)},formIds:A};y.formArrayProps=Z,E._formRef.__formRef__.values=E._formRef.__formRef__.getValues(),E._formRef.__formRef__.errors=E._formRef.__formRef__.getErrors(),React.useEffect(()=>()=>{g.current.dontResetOnUnmount&&(R.current.dontResetOnUnmount=g.current.dontResetOnUnmount)},[]),React.useEffect(()=>(y._ref(IS_FORMREF)._is_form_initiated=!0,y._renderForm(),y.renderForm(),()=>{R.current.dontResetOnUnmount||(y._ref(IS_FORMREF)._is_form_initiated=!1,y._renderForm(),y.renderForm())}),[y._formId_]),React.useEffect(()=>()=>{R.current.dontResetOnUnmount?(y._ref(IS_FORMREF)[IS_MULTIPLE]._initialState||(y._ref(IS_FORMREF)[IS_MULTIPLE]._initialState=y._ref(IS_FORMREF)[IS_MULTIPLE]._initialValues),y._ref(IS_FORMREF)[IS_MULTIPLE]._initialValues=H()):y._ref(IS_FORMREF)[IS_MULTIPLE]._initialValues=y._ref(IS_FORMREF)[IS_MULTIPLE]._initialState,p.current.id&&(R.current.dontResetOnUnmount||C.deleteFormConfig([p.current.id]))},[C._formId_]),y._ref(IS_FORMREF)._setRenderForm||(y._ref(IS_FORMREF)._setRenderForm=l._setRenderForm),y&&y._formId_&&(y?y._ref(IS_FORMREF)._setInputProps=(e=>{C._renderInputProps&&C._renderInputProps(),P({})}):y._setInputProps=P);const Q={ref:y,...y},W=(e,r)=>{const t={index:e,totalArrayCount:M.length,append:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return N(r,A[e],t,!0)},reset:U.bind(null,A[e]),clear:j.bind(null,A[e]),delete:k.bind(null,A[e]),clone:x.bind(null,A[e]),swap:V.bind(null,A[e]),validate:r.validateForm,move:r=>T.bind(null,e,r),insert:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return N(r,e,t)},prepend:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;N(r,A[e],t)}};return{...t,form:t}};return React__default.createElement(FormContext.Provider,{value:{formId:C._formId_,setInputProps:d}},React__default.createElement(FormRefContext.Provider,{value:{formRef:y,formId:y._formId_,lastUpdated:y._lastUpdated,renderForm:F,setRefresh:O,rootFormRef:m||o,_rootRef:R}},n?"function"==typeof t?t(M,Q):t:M.map((e,r)=>"function"==typeof t?t({...e,...W(r,e.formRef),index:r},Q,r):t)))});const FormController=e=>{let{children:r,hide:t,render:o,inputConfig:n,...i}=e;return t?null:React__default.createElement(FormControllerContext.Provider,{value:{render:o,inputConfig:n,...i}},r)},emailRegex=/^([\w.+-]+@[a-zA-Z0-9.-]+\.[a-zA-z0-9]{2,4})$/;function validateEmail(e){return emailRegex.test(String(e).toLowerCase())}function validate(e,r){let{optional:t,minLength:o,isRequired:n,message:i={},length:a,pattern:u,key:f}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((t||!n)&&!e)return"";const l="number"!=typeof e&&"boolean"!=typeof e&&!e;if(e&&o&&e.length<o)return i&&void 0!==i.minLength?i.minLength:`Minimum ${o} characters is required`;if(e&&a&&e.length!==a)return i&&i&&void 0!==i.length?i.length:`Number should be ${a} digits long`;switch(r){case"password":return l?i&&void 0!==i.required?i.required:"This field is required":"";case"email":return l?i&&void 0!==i.required?i.required:"Please enter your email":e&&!validateEmail(e)?i&&void 0!==i.invalid?i.invalid:"Invalid email address":"";case"name":return l?i&&void 0!==i.required?i.required:"Please enter your name":"";case"mobileNumber":return l?i&&void 0!==i.required?i.required:"Please enter 10 digit mobile number":"";case"about":return l?i&&void 0!==i.required?i.required:"This field is required":"";default:return l?i&&void 0!==i.required?i.required:"This field is required":u&&"[object RegExp]"===Object.prototype.toString.call(u)?u.test(e)?"":i&&void 0!==i.pattern?i.regex:`${f} is invalid `:""}}const formValidationHandler=function(){let{ON_CHANGE_KEY:e,ON_BLUR_KEY:r,VALUE_KEY:t,ERROR_KEY:o,VALIDATOR:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[],a={};const u=function(){let{VALIDATOR:f=n||validate,initialState:l={},getFormData:c,renderFormCallback:s=c,FORM_CONFIG:m={},ON_CHANGE_KEY:_=e||ON_CHANGE,ON_BLUR_KEY:d=r||ON_BLUR,VALUE_KEY:p=t||VALUE,ERROR_KEY:g=o||ERROR,[IS_MULTIPLE]:I,_formRef:R,_objKey:F="",_schemaKey:E,_initialErrors:C={},ref:h,_rootRef:y,_parentRef:v,_parentConfig:S,_parentId:P}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function O(){}const M={current:new O};O.prototype.is_validate_form_triggered=!1,O.prototype._schema={},O.prototype._formRef={},O.prototype._formIds=[];const b=R||M,L=e=>{deleteUniqueId(e),delete a[e];const r=b.current._formIds.filter(r=>r!==e);b.current._formIds=r,i=r};let A,T=_deepCopy(m);E||(T[IS_MULTIPLE]?(T={[IS_MULTIPLE]:T},A=IS_MULTIPLE):T[IS_SCHEMA]&&(T={[IS_SCHEMA]:T},A=IS_SCHEMA)),O.prototype._formConfig=_deepCopy(T);const V=I||A===IS_MULTIPLE;O.prototype._isMultipleForm=V,A&&(O.prototype._isSchema_or_isMultiple_config_is_root=A),O.prototype[IS_MULTIPLE]={_initialValues:V&&Array.isArray(l)?l.slice():[]},O.prototype._schema=M.current._schema;const U=e=>A?e[A]:e,j={initialValues:Array.isArray(l)?l.slice():newObject(l),Validate:f,getFormData:c,renderFormCallback:s,FORM_CONFIG:T,ON_CHANGE_KEY:_,ON_BLUR_KEY:d,VALUE_KEY:p,ERROR_KEY:g};O.prototype._initialFormConfig=j.FORM_CONFIG,O.prototype._initialConfig=j;const w=generateUniqueId();a[w]=M.current,i.push(w),b.current._formIds.push(w);let N=j.FORM_CONFIG;const x=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;const n=e||N;I&&e[IS_MULTIPLE]?O.prototype._multipleConfig=newObject(e):Object.entries(n).forEach(e=>{let[i,a]=e;if(o&&!o.includes(i))return;b.current._formRef.__formRef__||(b.current._formRef.__formRef__=M.current);const f=`${F?`${F}_`:""}${i}`;if((a[IS_SCHEMA]||a[IS_MULTIPLE])&&a[SCHEMA_CONFIG]||a._formId_){a[SCHEMA_CONFIG]?a[SCHEMA_CONFIG]=newObject(a[SCHEMA_CONFIG]):a._formId_&&(a._initialConfig=newObject(a._initialConfig),a._initialFormConfig=newObject(a._initialFormConfig));const e=M.current._schema[i]&&M.current._schema[i].formRef._formId_;e&&L(e);const o=u({...a._formId_?a._initialConfig:j,FORM_CONFIG:a._formId_?a._initialFormConfig:M.current._schema[i]&&M.current._schema[i].formRef.getFormConfig()||a[SCHEMA_CONFIG],ref:h,initialState:r[i]||l[i],_formRef:b,_objKey:f,_parentRef:M.current,_schemaKey:i,_parentConfig:n,_parentId:i,_initialErrors:t[i]||C[i],[IS_MULTIPLE]:a[IS_MULTIPLE]});M.current._hasChildRef=!0,M.current._schema[i]=o,b.current._formRef[f]=o}else o&&(H[i]=M.current._resetValue(i))})};x(N,l,C);const k=e=>r=>{const t=N[r]||{};return e?"default"in t?t.default:"":r in l?"function"==typeof l[r]?l[r]():l[r]:"default"in t?t.default:""};O.prototype._resetValue=k(!1),O.prototype._clearValue=k(!0);let H=_setInitialValues({formConfig:N,initialValues:l,formRef:M,isMultiple:I}),q=_setInitialErrors({formConfig:N,initialValues:C,formRef:M,isMultiple:I});O.prototype.formConfig=N;const $=e=>{if(b.current.getValues){M.current.values=M.current.getValues(),M.current.errors=M.current.getErrors(),O.prototype.formConfig=M.current.getFormConfig();const e=b.current.getValues(),r=b.current.getErrors(),t=b.current.getFormConfig();b.current.values=e,b.current.errors=r,b.current._ref(IS_FORMREF).formConfig=t,h&&"current"in h&&(h.current=h.current||{},h.current.values=e,h.current.errors=r,h.current.sampleFormObject=ce())}"function"!==typeOf(c)||e||setTimeout(()=>{if(b.current.getValues){const e={values:(y||b).current.getValues(),errors:(y||b).current.getErrors(),formConfig:(y||b).current.getFormConfig()};isEqual(e,b.current.oldData)||(b.current.oldData=e,c(e))}})},D=function(e,r){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=_deepCopy(e);O.prototype._initialFormConfig=_deepCopy(e),O.prototype._formConfig=o,O.prototype.formConfig=o;const n=M.current.getValues(),i=M.current.getErrors();O.prototype.formConfig=_checkType(e,M.current.formConfig),N=o;const a=Math.floor(Math.random()*generateTimeStamp());var u;return M.current.lastUpdated=a,t&&(u=r,(Array.isArray(u)?u:Object.keys(u)).reduce((e,r)=>{const t=M.current._schema[r]&&M.current._schema[r].formRef,o=t&&t._formId_;return o&&L(o),delete M.current._schema[r],delete M.current._schema[r],{...e,[r]:{}}},{}),(e=>{(Array.isArray(e)?e:Object.keys(e)).forEach(e=>{const r=`${F?`${F}_`:""}${e}`;delete M.current._formRef[r]})})(r),x(e,newObject(n),newObject(i),r),$(!t),"function"===typeOf(M.current._setInputProps)&&M.current._setInputProps(M.current.getInputProps(M.current._extraProps||b.current._extraProps))),M.current},G=(e,r)=>{M.current.values=_checkType(e,M.current.values),H=_checkType(e,H),$(),setTimeout(()=>{"function"!==typeOf(M.current._setInputProps)||r||M.current._setInputProps(M.current.getInputProps(M.current._extraProps||b.current._extraProps))})},Y=(e,r)=>{M.current.errors=_checkType(e,M.current.errors),q=M.current.errors,$(),"function"!==typeOf(M.current._setInputProps)||r||M.current._setInputProps(M.current.getInputProps(M.current._extraProps||b.current._extraProps))},K=function(e,r,t,o,n){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6?arguments[6]:void 0;const u=n||M.current.formConfig[r]||{};let{value:l,error:c}=u.validator?u.validator(e,{formRef:M.current,values:H,errors:q},u._config,u._commonInputProps):{value:e},s=null;if(("boolean"!=typeof u.validate||u.validate)&&u._initiated&&("boolean"!=typeof u.isValidateOnChange||u.isValidateOnChange)){if(s=c,((void 0!==u.trim?u.trim:u.trim||i)||"number"===u.type||u.allowOnlyNumber||u.allowValidNumber)&&(l=_trimStrings(l,u.isNumber)),"number"===u.type){if(Number.isNaN(+l)&&""!==l)return{error:s,value:H[r],key:r}}else u.allowOnlyNumber&&Number.isNaN(+l)&&""!==l&&(s=s||(void 0!==(u.message&&u.message.allowOnlyNumber)?u.message&&u.message.allowOnlyNumber:"Only numbers are allowed"));""!==l&&["string","number"].includes(typeof l)&&Number.isNaN(+l)&&u.allowValidNumber&&!+l&&(s=s||(void 0!==(u.message&&u.message.allowValidNumber)?u.message&&u.message.allowValidNumber:"Please enter valid number")),u.maxLength&&(l||"").length>u.maxLength&&(s=s||(void 0!==(u.message&&u.message.maxLength)?u.message.maxLength:`maximum ${u.maxLength} characters are allowed`)),s=s||f(l,u.type,{key:r,optional:u.optional,minLength:u.minLength,message:u.message,maxLength:u.maxLength,length:u.length,...u}),l&&u.match&&"string"==typeof u.match&&H[u.match]&&(s=s||(H[u.match]!==l?void 0!==(u.message&&u.message.match)?u.message.match:`${r} not matching with ${u.match}`:null)),(u.allowOnlyNumber||u.min||u.max)&&(Number.isNaN(+l)||""===l||l&&(u.min||u.max)&&(+l<u.min?s=s||(void 0!==(u.message&&u.message.min)?u.message&&u.message.min:`Minimum value ${u.min} is required`):+l>u.max&&(s=s||(void 0!==(u.message&&u.message.max)?u.message&&u.message.max:`Maximum value ${u.max} is allowed`))))}if("function"==typeof u.callback){const e=u.callback({error:s,value:l,key:r,formRef:M.current,values:H,errors:q,is_validation_allowed:"boolean"!=typeof u.validate||u.validate},M.current.formConfig[r]._config,M.current.formConfig[r]._commonInputProps);"object"===typeOf(e)&&(void 0!==e.value&&(l=e.value),void 0!==e.error&&(s=e.error))}return t&&G({...H,[r]:l},a),o&&Y({...q,[r]:s||null},a),{error:s,value:l,key:r}},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,{value:t,isStopPropagation:o,isValidateOnly:n,config:i,isSetError:a=!0,trim:u,dontRender:f}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&"function"==typeof e.preventDefault&&e.preventDefault(),e&&o&&"function"==typeof e.stopPropagation&&e.stopPropagation();let l=void 0!==t?t:_getPlatformBasedFieldValue(e);const c=_getPlatformBasedFieldName(e),s=r||c;if(n||!s)return K(l,s,null,null,i,u,f);K(l,s,!0,a,void 0,u,f)},z=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=_getPlatformBasedFieldName(e),n=r||o,i=H[n];(void 0===t.isValidateOnBlur||t.isValidateOnBlur)&&K(i,n,!1,!0)},J=e=>{let r=M.current.validateThisForm(e);return(r=Object.entries(M.current._schema).reduce((r,t)=>{let[o,n]=t;if(n.formRef._isMultipleForm&&!n.formRef[IS_MULTIPLE].validateForm)return r;let i=n.formRef[IS_MULTIPLE].validateForm?n.formRef[IS_MULTIPLE].validateForm(e):n.formRef.validateForm(e);return{errorCount:r.errorCount+i.errorCount,isError:r.isError||i.isError,isValidatePassed:r.isValidatePassed||i.isValidatePassed,totalErrorCount:r.totalErrorCount+i.totalErrorCount,errors:newObject(r.errors,{[o]:i.errors}),values:newObject(r.values,{[o]:i.values})}},r)).values=U(r.values),r.errors=U(r.errors),r},Z=e=>r=>{const t="function"==typeof r?r(M.current.getFormConfig()):r,o=Object.keys(r);return D(e?newObject(t):{...M.current.getFormConfig(),...t},o)},Q=e=>{const r={...N};Array.isArray(e)&&(e.forEach(e=>{"string"===typeOf(e)&&delete r[e]}),D(r,e))},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;e.forEach(e=>{H[e]&&B(H[e],e,r)})},X=function(e){let{config:r,propKeyMap:{onChange:t=_,onBlur:o=d,value:n=p,error:i=g}={},...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=M.current.formConfig[e],f=newObject(u._commonInputProps&&u._commonInputProps._defaultConfig||u);u&&(u._config={config:r,formId:w,key:e,keyName:e,lastUpdated:M.current.lastUpdated,...a},void 0===u._config.config&&delete u._config.config);let l={[t]:t=>{B(t,e,r);const o=u&&u.validateFieldsOnChange;o&&o.length>0&&W(o,u._config),u.render&&M.current.renderForm()},[o]:r=>z(r,e,u),[n]:H[e],[i]:q[e]};return(l={...l,...u&&("function"==typeof u.inputProps?u.inputProps(M.current,u._config,{onChange:l[t],onBlur:l[o],value:l[n],error:l[i],key:e}):u.inputProps)||{}}).inputProps={...l},l._fieldConfig=u,l._config={...M.current.formConfig[e]},l[IS_SCHEMA]={validateField:t=>{B(t,e,{...r,dontRender:!0});const o=r&&r.validateFieldsOnChange||u&&u.validateFieldsOnChange;o&&o.length>0&&W(o,{...u._config,dontRender:!0})}},l._defaultConfig=f,delete l._config.inputProps,delete l._config._commonInputProps,u&&(u._commonInputProps={...l}),l},ee=(e,r)=>{const t=e||{},o=Object.entries(M.current.formConfig).reduce((e,o)=>{let[n,i]=o;return i[IS_SCHEMA]||i._formId_||i[IS_MULTIPLE]?(M.current._schema[n].formRef.setInitialFormData(t[n],r),e):newObject(e,{[n]:n in t?t[n]:r?M.current._resetValue(n):t[n]})},{});G(o)},re=e=>r=>{const t=Object.entries(N||{}).reduce((t,o)=>{let[n,i={}]=o;const a=e?"clearForm":"resetForm";return newObject(t,i[IS_SCHEMA]||i._formId_||i[IS_MULTIPLE]?r?{}:{[n]:i[IS_MULTIPLE]?(()=>{const e=M.current._schema[n].formRef[a]();return Array.isArray(e)?e:[]})():M.current._schema[n].formRef[a]()}:{[n]:e?M.current._clearValue(n):M.current._resetValue(n)})},H);return M.current.setFormValues(newObject(t),!0),M.current.setFormErrors({},!0),t},te=()=>oe(M.current._extraProps||b.current._extraProps),oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(M.current.formConfig).reduce((r,t)=>{let[o,n]=t;return n[IS_SCHEMA]||n._formId_?r:{...r,[o]:X(o,e)}},{[IS_SCHEMA]:{addFormConfig:M.current.modifyFormConfig,deleteFormConfig:M.current.deleteFormConfig,getInputProps:te,onFormChangeCallback:$,resetFormInput:M.current.resetFormInput}})},ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={...N},t={...q};Object.entries(e).forEach(e=>{let[o,n]=e;r[o].validate=n,n||(t[o]=null)}),D(r,Object.keys(e)),Y(t)},ie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={...N},t={...q};Object.entries(e).forEach(e=>{let[o,n]=e;r[o].optional=n,r[o].isRequired=!1,t[o]=null}),D(r,Object.keys(e)),Y(t),W(Object.keys(e))},ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={...N},t={...q};Object.entries(e).forEach(e=>{let[o,n]=e;r[o].isRequired=n,r[o].optional=!1,t[o]=null}),D(r,Object.keys(e)),Y(t),W(Object.keys(e))},ue=()=>U(Object.entries(M.current.getFormConfig()).reduce((e,r)=>{let[t,o]=r;const n=o[IS_SCHEMA]||o._formId_||o[IS_MULTIPLE];if((!n&&!o._initiated||n&&(!M.current._schema[t]||!M.current._schema[t].formRef._is_form_initiated))&&!A)return e;if(!n&&!o._initiated)return e;let i=o[IS_MULTIPLE]?q[t]:M.current._schema[t]&&M.current._schema[t].formRef.getValues();const a=M.current._schema[t]&&M.current._schema[t].formRef[IS_MULTIPLE].getValues;return"function"==typeof a&&(i=a()),i=o[IS_MULTIPLE]?Array.isArray(i)?i:[]:i,{...e,[t]:n?i:void 0===H[t]?"default"in o?o.default:"":H[t]}},{})),fe=()=>U(Object.entries(N).reduce((e,r)=>{let[t,o]=r;const n=o[IS_SCHEMA]||o._formId_||o[IS_MULTIPLE];if((!n&&!o._initiated||n&&(!M.current._schema[t]||!M.current._schema[t].formRef._is_form_initiated))&&!A)return e;let i=o[IS_MULTIPLE]?q[t]:M.current._schema[t]&&M.current._schema[t].formRef.getErrors();const a=M.current._schema[t]&&M.current._schema[t].formRef[IS_MULTIPLE].getErrors;return"function"==typeof a&&(i=a()),{...e,[t]:n?o[IS_MULTIPLE]?Array.isArray(i)?i:[i]:i:q[t]||null}},{})),le=()=>newObject(U(Object.entries(N).reduce((e,r)=>{let[t,o]=r;if(o[IS_SCHEMA]||o._formId_||o[IS_MULTIPLE]){let r=M.current._schema[t]&&M.current._schema[t].formRef.getFormConfig;return"function"==typeof r?{...e,[t]:{...o,[SCHEMA_CONFIG]:o[IS_MULTIPLE]&&M.current._schema[t]&&M.current._schema[t].formRef[IS_MULTIPLE].getFormConfig&&M.current._schema[t].formRef[IS_MULTIPLE].getFormConfig()||r()}}:e}return{...e,[t]:o}},{}))),ce=()=>U(Object.entries(N).reduce((e,r)=>{let t,[o,n]=r;return t=n[IS_MULTIPLE]?M.current._schema[o]&&M.current._schema[o].formRef[IS_MULTIPLE].getSampleForm&&M.current._schema[o].formRef[IS_MULTIPLE].getSampleForm():M.current._schema[o]&&M.current._schema[o].formRef.getSampleForm(),{...e,[o]:n[IS_SCHEMA]||n._formId_||n[IS_MULTIPLE]?n[IS_MULTIPLE]?Array.isArray(t)?t:[t]:t:n.default}},{})),se=e=>{const r={...H},t={...q};(e||[]).forEach(e=>{const o=N[e];(o[IS_SCHEMA]||o[IS_MULTIPLE])&&o[SCHEMA_CONFIG]?r[e]=M.current._schema[e].formRef.resetForm():(r[e]=M.current._resetValue(e),t[e]=null)}),G(r),Y(t)},me=e=>{const r={...H},t={...q};(e||[]).forEach(e=>{const o=N[e];(o[IS_SCHEMA]||o[IS_MULTIPLE])&&o[SCHEMA_CONFIG]?r[e]=M.current._schema[e].formRef.clearForm():(r[e]=M.current._clearValue(e),t[e]=null)}),G(r),Y(t)};return M.current.getValues=ue,M.current.getErrors=fe,M.current.setFormValues=ee,M.current.setFormErrors=((e,r)=>{const t=Object.entries(M.current.formConfig).reduce((t,o)=>{let[n,i]=o;return i[IS_SCHEMA]||i._formId_||i[IS_MULTIPLE]?(M.current._schema[n].formRef.setFormErrors(e&&e[n]||{},r),t):newObject(t,{[n]:n in e||r?e[n]||null:q[n]})},{});Y(t)}),M.current.getSampleForm=ce,M.current.validateForm=J,M.current.resetForm=re(!1),M.current.clearForm=re(!0),M.current._isMultipleForm||(M.current.setValidate=ne,M.current.setOptional=ie,M.current.setRequired=ae,M.current.setOptional=ie,M.current.setRequired=ae,M.current.resetValues=se,M.current.clearValues=me,M.current.deleteFormConfig=Q,M.current.modifyFormConfig=Z(!1),M.current.resetFormConfig=Z(!0)),M.current.renderForm=(()=>{if("function"===typeOf(s)&&(y||b).current.getValues){const e={values:(y||b).current.getValues(),errors:(y||b).current.getErrors(),formConfig:(y||b).current.getFormConfig()};s(e)}}),M.current.getFormRef=(e=>{if(e&&e.length>0&&"array"===typeOf(e)){const r=M.current._formRef[e.join("_")];return r?r.formRef:null}return e?null:M.current._formRef.__formRef__}),M.current.getFormRefById=(e=>a[e]?a[e]:null),M.current._isRootRef=!R,v&&(O.prototype._parentRef=v),S&&(O.prototype._parentConfig=S),P&&(O.prototype._parentId=P),O.prototype._ref=(e=>e===IS_FORMREF?O.prototype:null),O.prototype.getInputProps=oe,O.prototype.getFormConfig=le,O.prototype.commonInputProps=X,O.prototype.setInitialFormData=ee,O.prototype._renderForm=$,O.prototype.onBlurValues=z,O.prototype.onChangeValues=B,O.prototype.onValidateValues=(e=>{let{value:r,isValue:t,key:o,isValidateOnly:n,config:i,trim:a}=e;return B(r,o,{value:t?r:void 0,isValidateOnly:n,config:i,trim:a})}),O.prototype.validateThisForm=function(){let{isSetError:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M.current.is_validate_form_triggered=!0;const r=M.current.getValues(),t=q,o=[];for(const[n,i]of Object.entries(N)){if(i[IS_SCHEMA]||i[IS_MULTIPLE]||i._formId_)continue;const{error:a}=K(r[n],n,!1,!1,i,!0);t[n]=a,a&&o.push(null),e&&Y(t)}return M.current.is_validate_form_triggered=!1,{values:PRIMITIVE_VALUE in r?r[PRIMITIVE_VALUE]:r,errors:PRIMITIVE_VALUE in t?t[PRIMITIVE_VALUE]:t,totalErrorCount:o.length,errorCount:o.length,isError:o.length>0,isValidatePassed:0===o.length}},O.prototype.validateObject=((e,r)=>J({isSetError:!1,values:e,formConfig:r,isNewFormConfig:!0,isResetValue:!0,isResetError:!0})),O.prototype._onUnMountForm=(()=>{b.current._formIds.forEach(e=>{L(e),deleteUniqueId(e)})}),O.prototype.getSchema=(()=>newObject(U(Object.entries(N).reduce((e,r)=>{let[t,o]=r;if(o[IS_SCHEMA]||o._formId_||o[IS_MULTIPLE]){let r=M.current._schema[t]&&M.current._schema[t].formRef.getSchema;return"function"==typeof r?{...e,[t]:{...o,[SCHEMA_CONFIG]:r()}}:e}return{...e,[t]:o}},{})))),O.prototype.setFormConfig=D,O.prototype.resetFormInput=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;const t={...H},o={...q};e.forEach(e=>{!r||e in l?(t[e]=M.current._resetValue(e),o[e]=null):(delete t[e],delete o[e])}),G(t),Y(o)},O.prototype.validateCustomForm=(e=>{let{isSetError:r,formConfig:t={},values:o={},errors:n={}}=e;const i=t,a=o,u=n,f=[];for(const e of Object.keys(i)){const{error:r}=K(a[e],e,!1,!1,i[e]);u[e]=r,r&&f.push(null)}return r&&Y(u),{values:a,errors:u,totalErrorCount:f.length,errorCount:f.length,isError:f.length>0,isValidatePassed:0===f.length}}),O.prototype.getFormConfig=le,O.prototype._objKey=F,O.prototype._schema=M.current._schema,O.prototype._formValidationHandler=u,O.prototype.formConfig=newObject(M.current._formConfig),O.prototype._renderInputProps=(()=>{"function"===typeOf(M.current._setInputProps)&&M.current._setInputProps(M.current.getInputProps(M.current._extraProps||b.current._extraProps))}),O.prototype._formId_=w,M.current.formId=w,O.prototype._ref=(e=>e===IS_FORMREF?O.prototype:null),M.current.values=ue(),M.current.errors=fe(),$(),{formRef:M.current,formId:w}};return{useForm:e=>{let{renderForm:r,...t}=e;const o=React.useState()[1],[{formRef:n,formId:i}]=React.useState(()=>u({...t,renderFormCallback:o,getFormData:r?o:void 0}));return n._ref(IS_FORMREF)._setRenderForm=o,n._ref(IS_FORMREF)._isRenderForm=r,React.useEffect(()=>n._onUnMountForm,[n]),{formRef:n,formId:i}},formHandler:u,useFormRef:e=>{const{formRef:r,rootFormRef:t}=React.useContext(FormRefContext)||{},o=e?a[e]:r;return o?{formRef:o,formId:o&&o._formId_,rootFormRef:t||o}:{}}}},FormProvider$1=formValidationHandler,Form={Consumer:FormConsumer,Provider:FormProvider,Controller:FormController,Multiple:MultipleFormProvider};exports.Form=Form,exports.FormProvider=FormProvider$1,exports.useFormConsumer=useFormConsumer;
